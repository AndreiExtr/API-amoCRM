(function(){"use strict";var e={622:function(e,t,a){var n=a(751),l=a(641);function o(e,t){const a=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(a)}var i=a(262);const r={},c=(0,i.A)(r,[["render",o]]);var s=c,d=a(220),u=a(33);const m={class:"app"},h={class:"create"},v={class:"create__dropdown"},b={key:0,class:"modal"},p={key:0,class:"deal-form"},f={class:"deal-form__name"},k={class:"deal-form__quantity"},y={class:"deal-form__bt"},I=["disabled"],w={class:"tabs"},j=["onClick"],N={class:"tab-content"},T={key:0,class:"deal-table"},L={key:1},M={key:2};function C(e,t,a,o,i,r){return(0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("div",h,[(0,l.Lk)("div",v,[t[7]||(t[7]=(0,l.Lk)("label",{for:"item-select"},"Выберите для создания нового элемента:",-1)),(0,l.bo)((0,l.Lk)("select",{id:"item-select","onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedItem=e),onChange:t[1]||(t[1]=(...t)=>e.onItemSelectChange&&e.onItemSelectChange(...t))},t[6]||(t[6]=[(0,l.Lk)("option",{value:"none"},"Не выбрано",-1),(0,l.Lk)("option",{value:"deal"},"Сделка",-1),(0,l.Lk)("option",{value:"contact"},"Контакт",-1),(0,l.Lk)("option",{value:"company"},"Компания",-1)]),544),[[n.u1,i.selectedItem]])]),i.isModalVisible?((0,l.uX)(),(0,l.CE)("div",b,["deal"===i.selectedItem?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",f,[t[8]||(t[8]=(0,l.Lk)("label",{for:"deal-name"},"Название сделки:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"deal-name","onUpdate:modelValue":t[2]||(t[2]=e=>i.newDeal.name=e),placeholder:"Введите название сделки"},null,512),[[n.Jo,i.newDeal.name]])]),(0,l.Lk)("div",k,[t[9]||(t[9]=(0,l.Lk)("label",{for:"deal-price"},"Цена:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number",id:"deal-price","onUpdate:modelValue":t[3]||(t[3]=e=>i.newDeal.price=e),placeholder:"Введите цену сделки"},null,512),[[n.Jo,i.newDeal.price]])]),(0,l.Lk)("div",y,[(0,l.Lk)("button",{class:(0,u.C4)(["create__button",{active:r.isCreateButtonActive}]),disabled:!r.isCreateButtonActive,onClick:t[4]||(t[4]=(...e)=>r.createDeal&&r.createDeal(...e))}," Создать ",10,I),(0,l.Lk)("button",{class:"cancel__button",onClick:t[5]||(t[5]=(...e)=>r.resetForm&&r.resetForm(...e))}," Отмена ")])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.tabs,(e=>((0,l.uX)(),(0,l.CE)("button",{key:e.value,onClick:t=>i.activeTab=e.value,class:(0,u.C4)({active:i.activeTab===e.value})},(0,u.v_)(e.label),11,j)))),128))]),(0,l.Lk)("div",N,["deal"===i.activeTab?((0,l.uX)(),(0,l.CE)("table",T,[t[10]||(t[10]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"ID Сделки"),(0,l.Lk)("th",null,"Название"),(0,l.Lk)("th",null,"Цена"),(0,l.Lk)("th",null,"Дата создания")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.deals,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,u.v_)(e.id),1),(0,l.Lk)("td",null,(0,u.v_)(e.name),1),(0,l.Lk)("td",null,(0,u.v_)(e.price),1),(0,l.Lk)("td",null,(0,u.v_)(e.created_at),1)])))),128))])])):"company"===i.activeTab?((0,l.uX)(),(0,l.CE)("p",L,'Содержимое вкладки "Компании"')):"contact"===i.activeTab?((0,l.uX)(),(0,l.CE)("p",M,'Содержимое вкладки "Контакты"')):(0,l.Q3)("",!0)])])}var g=a(335),D={name:"HomeView",data(){return{baseDomain:"lirifey500.amocrm.ru",accessToken:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjY5YzI4YTAwYjBjMmUzNTYxNzlmMjA3MWZiZmJiNTFlMTJiM2NkYWQyYjY4YmNkY2ZkYTIyMzUwMzQ1NDk2MTEwYmY2ODc1MzNiMjM5ZTdhIn0.eyJhdWQiOiJlZDEyMDU4NC1lZjRiLTRmZGEtYmEwYS1lZjhiNDA1MzY5NWUiLCJqdGkiOiI2OWMyOGEwMGIwYzJlMzU2MTc5ZjIwNzFmYmZiYjUxZTEyYjNjZGFkMmI2OGJjZGNmZGEyMjM1MDM0NTQ5NjExMGJmNjg3NTMzYjIzOWU3YSIsImlhdCI6MTczNzYxNjI0MywibmJmIjoxNzM3NjE2MjQzLCJleHAiOjE3Mzc3MDI2NDMsInN1YiI6IjEyMDE5Mzc4IiwiZ3JhbnRfdHlwZSI6IiIsImFjY291bnRfaWQiOjMyMTg1MzU4LCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJjcm0iXSwiaGFzaF91dWlkIjoiNmI2ZTE2YzUtNTI2ZC00ODIyLTg4ZDItNmNhNjMzNzg2OTE2IiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.MGff1mH6uOrZL68L-Ti7Wmm1pvhZSadLdfim_YyhJTry9ShvVr7N33nxuRXMfjXFvfJzksCOngTx_Js6rF24vvOhs_KixGN78WbIpuiJDhyYZ3oNrDJm9jbYOYUqnGSXEgUTCROxOuiCzJBmTHqi6d_rvJKzlAKOqax2C0f3KsOvVef2YBCsIS_NTsPSVvgxn__6n8YWz2NtNZ4wsPvw1Nghv4kimaeNLa1kmlWryNrfGB3H-CCstatDratx0-wc_VehDrScH1nS-PFqjuRGeghJzl6fdpdk1ma6jiC3ftcUyw8N04nwwU7t-1oHElEYjLmoIW4kXgvYv18xTeEbtg",isModalVisible:!0,selectedItem:"none",newDeal:{name:"",price:null},tabs:[{value:"deal",label:"Сделки"},{value:"company",label:"Компании"},{value:"contact",label:"Контакты"}],activeTab:"deal",deals:[]}},computed:{isCreateButtonActive(){return"deal"===this.selectedItem?this.newDeal.name&&this.newDeal.price>0:"none"!==this.selectedItem}},watch:{activeTab:"handleTabChange"},mounted(){"deal"===this.activeTab&&this.handleTabChange("deal")},methods:{async createDeal(){console.log("Данные перед отправкой:",this.newDeal);try{const e=await g.A.post("http://localhost:3000/create-deal",this.newDeal,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.accessToken}`}});console.log("Ответ от сервера:",e.data),e.data.createdDeal&&(this.deals.push({id:e.data.createdDeal.id,name:this.newDeal.name,price:this.newDeal.price,created_at:(new Date).toLocaleString()}),this.isModalVisible=!1)}catch(e){console.error("Ошибка при создании сделки:",e),e.response?console.error("Ответ от сервера:",e.response.data):console.error("Ошибка сети или сервера")}},async handleTabChange(e){if("deal"===e){await this.getToken();try{const e=await fetch("http://localhost:3000/get-deals"),t=await e.json();t.deals?this.deals=t.deals:console.error("Ошибка:",t.error||"Не удалось загрузить сделки")}catch(t){console.error("Ошибка при загрузке сделок:",t)}}},async getToken(){try{const e=await fetch("http://localhost:3000/get-token"),t=await e.json();t.access_token&&t.base_domain?console.log("Токен и домен успешно получены"):console.error("Не удалось получить токен и домен")}catch(e){console.error("Ошибка при получении токена:",e)}},resetForm(){this.newDeal.name="",this.newDeal.price=0,this.selectedItem="none"}}};const Y=(0,i.A)(D,[["render",C]]);var O=Y;const E=[{path:"/",name:"home",component:O}],_=(0,d.aE)({history:(0,d.LA)("/"),routes:E});var z=_,J=a(278),S=(0,J.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.Ef)(s).use(S).use(z).mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,o){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],o=e[d][2];for(var r=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(r=!1,o<i&&(i=o));if(r){e.splice(d--,1);var s=l();void 0!==s&&(t=s)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,l,o]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,o,i=n[0],r=n[1],c=n[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(c)var d=c(a)}for(t&&t(n);s<i.length;s++)o=i[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self["webpackChunkcompany"]=self["webpackChunkcompany"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(622)}));n=a.O(n)})();
//# sourceMappingURL=app.304521cf.js.map